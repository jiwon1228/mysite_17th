<html layout:decorate="~{layout}">
<div layout:fragment="content">
	<div class="container">
		<div class="jumbotron ">
			<h2 class="display-4">게시판 목록</h2>
		</div>
		<table class="table table-striped">
			<thead class="table-warning ">
				<tr class="text-center">
					<th>번호</th>
					<th>제목</th>
					<th>글쓴이</th>
					<th>작성일시</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="question,loop :${paging}" class="text-center">
					<!-- <td th:text="${loop.count}"></td> -->
					<!-- 게시물 번호 정렬 -->
					<td th:text="${paging.totalElements - (paging.number * paging.size)-loop.index}"></td>
					<td><a class="text-warning" th:text="${question.subject}"
						th:href="@{|/question/detail/${question.id}|}"></a>
						
					<!-- 답볍의개수출력 -->	
						<span class="badge badge-pill badge-success ml-2" th:if="${#lists.size(question.answerList)>0}" 
						th:text="${#lists.size(question.answerList)}"></span>
						</td>
					<!-- 글쓴이 -->
					<td>
						<span th:if="${question.author!=null}">[[${question.author.username}]]</span>
					</td>
					<!-- 작성일시 -->
					<td
						th:text="${#temporals.format(question.createDate,'yyyy년 MM월 dd일 HH시 mm분')}"></td>
				</tr>
			</tbody>
		</table>
		
		<!-- 페이징 구조 -->
			<nav th:if="${!paging.isEmpty()}">
			  <ul class="pagination justify-content-center">
			    <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
			     <a href="javascript:void(0)" 
			      	 th:href="@{|?page=${paging.number-1}|}" class="page-link">
			      	<span>이전</span>
			      </a>
			    </li>
			    <li 
				    th:each="page: ${#numbers.sequence(0,paging.totalPages-1)}" 
				  th:if="${page >= paging.number-2 and page <= paging.number+2}"
				    th:classappend="${page == paging.number}? 'active'"
				    class="page-item">
			    		<a th:href="@{|?page=${page}|}" class="page-link" href="javascript:void(0)" th:text="${page}"></a>
			    </li>
			    <!--th:each:"page:${#numbers,sequence(시작 번호,끝번호)를 넣으면 정해진 범위만큼 반복을 만들어내는 타임리프 기능이다.}
					#시작하는 문법 :SPEL총합표현언어의 타임리프 객체에 접근할 때 사용하는 타임리프 문법이다 예)
					#dates,#numbers,#strings,#list,#request,#session,#local  -->
			    <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
			        <a href="javascript:void(0)" 
			      	 th:href="@{|?page=${paging.number+1}|}" class="page-link">
			      	<span>다음</span>
			      </a>
			    </li>
			  </ul>
			</nav>
		
		<!-- 질문등록버튼 -->
		<a th:href="@{/question/create}" class="btn btn-warning text-white">질문 등록하기</a>
	</div>
</div>
</html>
